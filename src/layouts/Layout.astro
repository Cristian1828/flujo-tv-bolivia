---
import { site } from '../config/site';

interface Props {
  title?: string;
  description?: string;
  keywords?: string;
}

const {
  title = 'Flujo TV Bolivia | Streaming Premium en Android',
  description =
    'Cine, series y TV en vivo con una app rápida e intuitiva. Compatible con Android (móvil/tablet), TV Box, Fire Stick, Google TV y Xiaomi Stick. Requiere internet estable. Soporte 24/7.',
  keywords = [
    'Flujo TV Bolivia',
    'Streaming premium',
    'TV en vivo',
    'Películas',
    'Series',
    'Android TV Box',
    'Fire Stick',
    'Google TV',
    'Xiaomi Stick',
    'Magis TV',
    'Magis 4K',
    'MagisTV',
    'Magis TV Bolivia'
  ].join(', ')
} = Astro.props;

const canonicalUrl = new URL(Astro.url.pathname, site.canonical).toString();
const ogImageUrl = new URL('/logo_flujo.png', site.canonical).toString();
const pageId = `${canonicalUrl}#webpage`;
const orgId = `${site.canonical}#organization`;
const websiteId = `${site.canonical}#website`;
const serviceId = `${site.canonical}#service`;

const structuredData = {
  '@context': 'https://schema.org',
  '@graph': [
    {
      '@type': 'Organization',
      '@id': orgId,
      name: 'Flujo TV',
      url: site.canonical,
      logo: ogImageUrl,
      email: site.supportEmail,
      contactPoint: [
        {
          '@type': 'ContactPoint',
          contactType: 'customer support',
          email: site.supportEmail,
          availableLanguage: ['es']
        }
      ],
      sameAs: []
    },
    {
      '@type': 'WebSite',
      '@id': websiteId,
      url: site.canonical,
      name: 'Flujo TV',
      publisher: { '@id': orgId },
      inLanguage: 'es-BO'
    },
    {
      '@type': 'WebPage',
      '@id': pageId,
      url: canonicalUrl,
      name: title,
      description,
      isPartOf: { '@id': websiteId },
      about: { '@id': serviceId },
      inLanguage: 'es-BO',
      primaryImageOfPage: { '@type': 'ImageObject', url: ogImageUrl }
    },
    {
      '@type': 'Service',
      '@id': serviceId,
      name: 'Servicio de streaming para Bolivia',
      description,
      provider: { '@id': orgId },
      areaServed: [{ '@type': 'Country', name: 'Bolivia' }],
      offers: [
        { '@type': 'Offer', name: 'Plan 1 mes', price: 9, priceCurrency: 'USD', url: canonicalUrl, availability: 'https://schema.org/InStock' },
        { '@type': 'Offer', name: 'Plan 3 meses', price: 27, priceCurrency: 'USD', url: canonicalUrl, availability: 'https://schema.org/InStock' },
        { '@type': 'Offer', name: 'Plan 6 meses', price: 49, priceCurrency: 'USD', url: canonicalUrl, availability: 'https://schema.org/InStock' },
        { '@type': 'Offer', name: 'Plan 12 meses', price: 95, priceCurrency: 'USD', url: canonicalUrl, availability: 'https://schema.org/InStock' }
      ]
    }
  ]
};

const googleVerification = import.meta.env.PUBLIC_GOOGLE_SITE_VERIFICATION as string | undefined;
---

<!doctype html>
<html lang="es-BO">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <meta name="author" content="Flujo TV" />
    <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
    <meta name="googlebot" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
    <meta name="theme-color" content="#0A0A0A" />

    {googleVerification && <meta name="google-site-verification" content={googleVerification} />}

    <link rel="canonical" href={canonicalUrl} />
    <link rel="alternate" href={canonicalUrl} hreflang="es-BO" />
    <link rel="alternate" href={canonicalUrl} hreflang="x-default" />

    <meta property="og:type" content="website" />
    <meta property="og:locale" content="es_BO" />
    <meta property="og:site_name" content="Flujo TV" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:image" content={ogImageUrl} />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImageUrl} />

    <link rel="icon" type="image/png" href="/logo_flujo.png" />
    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />

    <meta name="generator" content={Astro.generator} />

    <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
  </head>
  <body class="bg-black text-white">
    <slot />
  </body>
</html>

<style is:global>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: 'Inter', sans-serif;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Courier New', monospace;
  }
</style>
